<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition> 
    <aghu:panelGeral id="aba2">
      <aghu:linha> 
        <h:outputText id="descricaoAba2" value="#{manterGradeAgendamentoController.descricaoGrade}" escape="false" style="font-size:90%"/> 
      </aghu:linha>  
      <aghu:linha> 
        <mec:field id="hrInicioField" required="true" label="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_HR_INICIO}" title="#{messages.TITLE_MANTER_GRADE_AGENDAMENTO_HR_INICIO}"> 
          <p:inputText id="hrInicio"  onfocus="jq('#hrInicioField:hrInicio').mask('99:99')" size="5" maxlength="5" requiredFake="true"  value="#{manterGradeAgendamentoController.horarioGradeConsulta.horaInicio}"> 
            <f:convertDateTime pattern="HH:mm" type="time"/> 
            <p:ajax event="change" process="@this"/>
          </p:inputText> 
        </mec:field>  
        <mec:field id="hrFimField" label="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_HR_FIM}" title="#{messages.TITLE_MANTER_GRADE_AGENDAMENTO_HR_FIM}"> 
          <p:inputText id="hrFim" onfocus="jq('#hrFimField:hrFim').mask('99:99')" size="5" maxlength="5"  value="#{manterGradeAgendamentoController.horarioGradeConsulta.horaFim}"> 
            <f:convertDateTime pattern="HH:mm" type="time"/> 
            <p:ajax event="change" process="@this"/>
          </p:inputText> 
        </mec:field>  
        <mec:inputNumero label="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_HORARIOS}" title="#{messages.TITLE_MANTER_GRADE_AGENDAMENTO_HORARIOS}" size="4" maxlength="4" ajaxValidation="false" value="#{manterGradeAgendamentoController.horarioGradeConsulta.numHorario}" id="horarios"/>  
		<aghu:div style="width:120px;margin-left:280px">
			<mec:field id="diasSemana" label="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_DIA}" required="true"> 
				<p:selectBooleanCheckbox disabled="#{manterGradeAgendamentoController.acaoEditar}" id="domingo" value="#{manterGradeAgendamentoController.dom}"/>
				<h:outputLabel  value="#{messages.LABEL_DOMINGO}" for="domingo" />
				<p:selectBooleanCheckbox disabled="#{manterGradeAgendamentoController.acaoEditar}" id="terca" value="#{manterGradeAgendamentoController.ter}"/>
				<h:outputLabel  value="#{messages.LABEL_TERCA}" for="terca" />
				<p:selectBooleanCheckbox disabled="#{manterGradeAgendamentoController.acaoEditar}" style="margin-left:8px" id="quinta" value="#{manterGradeAgendamentoController.qui}"/>
				<h:outputLabel  value="#{messages.LABEL_QUINTA}" for="quinta" />
				<p:selectBooleanCheckbox disabled="#{manterGradeAgendamentoController.acaoEditar}" id="sabado" value="#{manterGradeAgendamentoController.sab}"/>
				<h:outputLabel  value="#{messages.LABEL_SABADO}" for="sabado" />
				<aghu:linha>
				<p:selectBooleanCheckbox disabled="#{manterGradeAgendamentoController.acaoEditar}" id="segunda" value="#{manterGradeAgendamentoController.seg}"/>
				<h:outputLabel   value="#{messages.LABEL_SEGUNDA}" for="segunda" />
			    <p:selectBooleanCheckbox disabled="#{manterGradeAgendamentoController.acaoEditar}" id="quarta" value="#{manterGradeAgendamentoController.qua}"/>
				<h:outputLabel   value="#{messages.LABEL_QUARTA}" for="quarta" />
			    <p:selectBooleanCheckbox disabled="#{manterGradeAgendamentoController.acaoEditar}" id="sexta" value="#{manterGradeAgendamentoController.sex}"/>
				<h:outputLabel   value="#{messages.LABEL_SEXTA}" for="sexta" />
				</aghu:linha>
	        </mec:field>
	    </aghu:div>			
        <mec:field id="duracaoField" required="true" label="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_DURACAO}" title="#{messages.TITLE_MANTER_GRADE_AGENDAMENTO_DURACAO}"> 
          <p:inputText id="duracao" requiredFake="true" onfocus="jq('#duracaoField:duracao').mask('99:99')" size="5" maxlength="5"  value="#{manterGradeAgendamentoController.horarioGradeConsulta.duracao}"> 
            <f:convertDateTime pattern="HH:mm" type="time"/> 
            <p:ajax event="change" process="@this"/>
          </p:inputText> 
        </mec:field> 
      </aghu:linha>  
      <aghu:linha> 
        <p:outputPanel id="tipoPagadorCondicaoPanel" layout="inline"> 
          <mec:selectOneMenu required="true" label="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_PAGADOR}"  style="width: calc(100% - 14px)!important;" title="#{messages.TITLE_MANTER_GRADE_AGENDAMENTO_PAGADOR}" disabled="#{manterGradeAgendamentoController.formaAgendamentoAba1.indProjetoPesquisa}" value="#{manterGradeAgendamentoController.formaAgendamentoAba2.pagador}" items="#{manterGradeAgendamentoController.formaAgendamentoAba2.pagadorList}" itemLabel="descricao" id="pagadorAba2"> 
            <p:ajax event="change" immedite="true" update="@(#tipoAgendamentoAba2) @(#pagadorAba2)" process="@this" listener="#{manterGradeAgendamentoController.popularCombosAba2('PAGADOR')}"/> 
          </mec:selectOneMenu>
          <mec:selectOneMenu requiredFake="true" label="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_TIPO}" style="width: calc(100% - 14px)!important;"  title="#{messages.TITLE_MANTER_GRADE_AGENDAMENTO_TIPO}" value="#{manterGradeAgendamentoController.formaAgendamentoAba2.tipoAgendamento}" items="#{manterGradeAgendamentoController.formaAgendamentoAba2.tipoAgendamentoList}" itemLabel="descricao" id="tipoAgendamentoAba2"> 
            <p:ajax event="change" update="@this" process="@this" listener="#{manterGradeAgendamentoController.popularCombosAba2('TIPO')}"/> 
          </mec:selectOneMenu>  
          <mec:selectOneMenu requiredFake="true" label="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_CONDICAO}" style="width: calc(100% - 14px)!important;" title="#{messages.TITLE_MANTER_GRADE_AGENDAMENTO_CONDICAO}" value="#{manterGradeAgendamentoController.formaAgendamentoAba2.condicaoAtendimento}" converter="#{aghCondicaoAtendimentoConverter}" items="#{manterGradeAgendamentoController.formaAgendamentoAba2.condicaoAtendimentoList}" itemLabel="descricao" id="condicaoAtendimentoAba2"> 
	     	<p:ajax event="change"  update="@this" process="@this"/>
	     </mec:selectOneMenu>	
	     <mec:selectOneMenu label="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_SITUACAO}" title="#{messages.TITLE_MANTER_GRADE_AGENDAMENTO_SITUACAO}" noSelectionOption="false" requiredFake="true" ajaxValidation="false" value="#{manterGradeAgendamentoController.horarioGradeConsulta.situacao}" enum="DominioSituacao" id="situacaoAba2">  
        	<p:ajax  event="change" update="@this" process="@this"/>
         </mec:selectOneMenu> 	
        </p:outputPanel> 
        <p:outputPanel id="panel_bt_adicionar" layout="inline"> 
          <br clear="none"/>  
          <mec:commandButton id="aba2_bt_gravar" value="#{messages.LABEL_GRAVAR}" rendered="#{empty manterGradeAgendamentoController.horarioGradeConsulta.id}" action="#{manterGradeAgendamentoController.adicionaVarios}" process="@this, hrInicioField, hrFimField, horarios, diaSemana, duracaoField, pagadorAba2, tipoAgendamentoAba2, condicaoAtendimentoAba2, situacaoAba2,diasSemana" profile="ok" ajax="true" render="aba2,listHorarioGrade,panelButtons, listAba2"/>  
          <mec:commandButton id="aba2_bt_alterar" value="#{messages.LABEL_ALTERAR}" rendered="#{not empty manterGradeAgendamentoController.horarioGradeConsulta.id}" action="#{manterGradeAgendamentoController.adicionarAgendamento}" process="@this, hrInicioField, hrFimField, diaSemana,horarios, diaSemana, duracaoField,diasSemana, pagadorAba2,tipoAgendamentoAba2,condicaoAtendimentoAba2,situacaoAba2" profile="ok" ajax="true" render="aba2,panelButtons"/>  
          <mec:commandButton id="aba2_bt_cancelar" style="float:bottom;" value="#{messages.LABEL_CANCEL_EDI}" rendered="#{not empty manterGradeAgendamentoController.horarioGradeConsulta.id}" action="#{manterGradeAgendamentoController.cancelarEdicao}" styleClass="bt_cancel_edit  bt_cinza" ajax="true" render="aba2,panelButtons" process="@this"/> 
        </p:outputPanel> 
      </aghu:linha>
      <aghu:linha id="listAba2" styleClass="tabela-hachurada">  
         <mec:serverDataTable id="listHorarioGrade" style="margin: 0px !important;" list="#{manterGradeAgendamentoController.horarioGradeConsultaList}" scrollable="true"> 

           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_ACOES}"/> 
             </f:facet>  
             <p:outputPanel layout="inline"> 
               <mec:commandLink id="aba2_link_editar" action="#{manterGradeAgendamentoController.editarAgendamento(item)}" rendered="#{manterGradeAgendamentoController.horarioGradeConsulta.id ne item.id}" style="vertical-align:middle;" title="#{messages.LABEL_EDITAR}" profile="edit" ajax="true" render="aba2,panelButtons" process="@this"/>  
               <p:spacer width="5px" rendered="#{manterGradeAgendamentoController.horarioGradeConsulta.id eq item.id}"/>  
               <mec:commandLink id="aba2_link_delete" style="vertical-align:middle;" action="#{manterGradeAgendamentoController.removerAgendamento(item)}" title="#{messages.LABEL_EXCLUIR}" profile="delete" ajax="true" render="aba2,listAba2,panelButtons" process="@this"/> 
             </p:outputPanel> 
           </p:column>  
           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_HR_INICIO}"/> 
             </f:facet>  
             <h:outputText value="#{item.horaInicio}"> 
               <f:convertDateTime pattern="HH:mm"/> 
             </h:outputText> 
           </p:column>  
           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_HR_FIM}"/> 
             </f:facet>  
             <h:outputText value="#{item.horaFim}"> 
               <f:convertDateTime pattern="HH:mm"/> 
             </h:outputText> 
           </p:column>  
           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_HORARIOS}"/> 
             </f:facet>  
             <h:outputText value="#{item.numHorario}"/> 
           </p:column>  
           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_DURACAO}"/> 
             </f:facet>  
             <h:outputText value="#{item.duracao}"> 
               <f:convertDateTime pattern="HH:mm"/> 
             </h:outputText> 
           </p:column>  
           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_DIA}"/> 
             </f:facet>  
             <h:outputText value="#{item.diaSemana.descricao}"/> 
           </p:column>  
           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_PAGADOR}"/> 
             </f:facet>  
             <h:outputText value="#{item.formaAgendamento.pagador.descricao}"/> 
           </p:column>  
           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_TIPO}"/> 
             </f:facet>  
             <h:outputText value="#{item.formaAgendamento.tipoAgendamento.descricao}"/> 
           </p:column>  
           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_CONDICAO}"/> 
             </f:facet>  
             <h:outputText value="#{item.formaAgendamento.condicaoAtendimento.descricao}"/> 
           </p:column>  
           <p:column style="#{(item.id eq manterGradeAgendamentoController.horarioGradeConsulta.id)?'background-color:#EEE8AA':''}"> 
             <f:facet name="header"> 
               <h:outputText value="#{messages.LABEL_MANTER_GRADE_AGENDAMENTO_SITUACAO}"/> 
             </f:facet>  
             <h:outputText value="#{item.situacao.descricao}"/> 
           </p:column> 
         </mec:serverDataTable> 
		  <!-- <mec:commandButton id="bt_excluira" onclick="PF('modalConfirmacaoExclusaoWG').show();;return false;" value="#{messages.LABEL_EXCLUIR_TODOS}" rendered="#{not empty manterGradeAgendamentoController.horarioGradeConsultaList}"  profile="remove" styleClass="button-acao bt_vermelho" /> -->
		 <p:commandButton id="bt_excluirax" onclick="PF('modalConfirmacaoExclusaoWG').show();;return false;" value="#{messages.LABEL_EXCLUIR_TODOS}"  style="float:left" icon="aghu-icons-16x16 aghu-icon-lixeira" styleClass="button-acao bt_vermelho" />
      </aghu:linha>
     </aghu:panelGeral>
  </ui:composition> 
</html>
