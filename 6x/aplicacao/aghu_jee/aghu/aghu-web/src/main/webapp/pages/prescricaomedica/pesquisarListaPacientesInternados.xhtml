<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" 
xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" 
xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" 
xmlns:p="http://primefaces.org/ui" 
xmlns:pe="http://primefaces.org/ui/extensions" 
xmlns:aghu="http://xmlns.jcp.org/jsf/component" 
xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
xmlns:f="http://xmlns.jcp.org/jsf/core" 
xmlns:h="http://xmlns.jcp.org/jsf/html" 
xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" 
xmlns:mf="http://www.mec.gov.br/taglib">  

  <ui:composition template="/WEB-INF/templates/form_template.xhtml">  
    <ui:define name="head"> 
      <title>Lista de pacientes internados</title>
      <script type="text/javascript" >
			function evolucao(url, atdSeq, token) { var otherParams = 'aghw_token=' + token + '+p_atd_seq=' + atdSeq; if (atdSeq != null) { abrirJanelaModal(url,{ parameters: { config: 'aghweb', form: 'mamf_atu_internacao.fmx', otherparams: otherParams }, onClose: function() { } }); } }

            function solicitacao(url, banco, atdSeq, token) {
                    var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;
                    if (atdSeq != null) {
                        abrirJanelaModal(url,{
                                parameters: {
                                    config: 'aghweb',
                                    form: 'aelf_solicitar_exame.fmx',
                                    otherparams: otherParams
                                },
                                onClose: function() {

                                }
                            });
                    }
                }

            function open_modal_aghweb(url, atdSeq, token, banco, formFmx) {
                var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;
                if (atdSeq != null) {
                    abrirJanelaModal(url,{
                    parameters: {
                    config: 'aghweb',
                    form: formFmx,
                    otherparams: otherParams
                    },
                    onClose: function() {

                             }
                    });
                }
            }

            function open_modal_aghweb_receita(url, atdSeq, token, banco, formFmx, rgt) {
                var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq + '+p_uso=I' + '+p_rgt_seq='+rgt;
                if (atdSeq != null) {
                    abrirJanelaModal(url,{
                    parameters: {
                    config: 'aghweb',
                    form: formFmx,
                    otherparams: otherParams
                    },
                    onClose: function() {

                             }
                    });
                }
            }

            function open_modal_dialise(url, token, atdSeq, seqTratamento, banco, formFmx) {
                var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+in_atd_seq=' + seqTratamento + '+p_atd_seq_int=' + atdSeq + "+CG$STARTUP_MODE=RESTRICTED AUTO QUERY";
                if (atdSeq != null) {
                    abrirJanelaModal(url,{
                    parameters: {
                    config: 'aghweb',
                    form: formFmx,
                    otherparams: otherParams
                    },
                    onClose: function() {

                             }
                    });
                }
            }

			function open_modal_aghweb_sumario_alta_obito(url, token, altanAtdSeq, apaSeq, origem, altanConsulta, pacCodigo, banco, formFmx) {
                var otherParams = 'aghw_token=' + token + '+altan_atd_seq=' + altanAtdSeq + '+altan_apa_seq=' + apaSeq + '+altan_lista_origem=' + origem + '+altan_consulta=' + altanConsulta + '+pac_codigo=' + pacCodigo + '+p_banco=' + banco;
                if (altanAtdSeq != null) {
                    abrirJanelaModal(url,{
                    parameters: {
                    config: 'aghweb',
                    form: formFmx,
                    otherparams: otherParams
                    },
                    onClose: function() {

                             }
                    });
                }
            }

            function open_modal_aghweb_sumario_obito_ficha_pendente(url, token, altanAtdSeq, apaSeq, origem, altanConsulta, pacCodigo, atdSeq, banco, formFmx) {
                var otherParams = 'aghw_token=' + token + '+altan_atd_seq=' + altanAtdSeq + '+altan_apa_seq=' + apaSeq + '+altan_lista_origem=' + origem + '+altan_consulta=' + altanConsulta + '+pac_codigo=' + pacCodigo + '+p_atd_seq=' + atdSeq + '+p_banco=' + banco;
                if (altanAtdSeq != null) {
                    abrirJanelaModal(url,{
                    parameters: {
                    config: 'aghweb',
                    form: formFmx,
                    otherparams: otherParams
                    },
                    onClose: function() {

                             }
                    });
                }
            }
	 </script>
    </ui:define>  
     <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{listaPacientesInternadosController.inicio}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{listaPacientesInternadosController}"/>  
      <h:form prependId="false" id="formListaPacientes">       
      
        <aghu:panelGeral legend="#{messages.LEGENDA_LISTA_PACIENTES}"> 
          <aghu:column type="table">
              <mec:serverDataTable 
              			id="listaPacientes"               			
              			list="#{listaPacientesInternadosController.lista}" 
              			scrollable="true" 
              			scrollHeight="510"              			
              			selection="pacienteListaProfissionalVO"
						controller="#{listaPacientesInternadosController}" >
				
				<p:ajax event="rowSelect"
							listener="#{listaPacientesInternadosController.selecionarPaciente}"
							update="@(#tabelaAcao)" 
							onstart="PF('loadDialogWG').show();" 
							oncomplete="PF('loadDialogWG').hide();" />		
              			 
                <c:set var="_listaPacientes" value="#{item}"/>                  
                
                <p:column sortBy="#{_listaPacientes.local}" style="width:7%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_LOCAL}"/> 
                  </f:facet> 
                  <h:outputText id="local" value="#{_listaPacientes.local}"/>
				  <p:tooltip id="ttLocal" styleClass="tooltip" for="local" rendered="#{_listaPacientes.indGmr}">
						<b>#{messages.TITLE_INDICADOR_GMR}</b>
					</p:tooltip>
                </p:column>  
                <p:column sortBy="#{_listaPacientes.nome}" style="width:23%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_NOME_NOME_SOCIAL}"/> 
                  </f:facet>  
                  <h:outputText id="nome" value="#{_listaPacientes.nomeSocial != null ? _listaPacientes.nomeSocial : _listaPacientes.nome}"  title="#{_listaPacientes.possuiPlanoAltas ? messages.MENSAGEM_PAC_PREV_PLANO_ALTA : null}"/>
                  <p:tooltip id="ttNome" styleClass="tooltip" for="nome" rendered="#{_listaPacientes.possuiPlanoAltas or _listaPacientes.indGmr}">
                  		<h:outputText value="#{messages.MENSAGEM_PAC_PREV_PLANO_ALTA}" rendered="#{_listaPacientes.possuiPlanoAltas}"/>
                  		<br clear="none"/><b>#{_listaPacientes.indGmr ? messages.TITLE_INDICADOR_GMR:''}</b>
                  </p:tooltip>
                  <h:graphicImage title="#{messages.LABEL_NOME_CIVIL}: #{_listaPacientes.nome}"  value="../../resources/img/icons/nome-civil-paciente.png" style="border:0px; float:right;"  rendered="#{_listaPacientes.nomeSocial != null}" />
                </p:column>  
                <p:column sortBy="#{_listaPacientes.idade}" style="text-align: center; width:5%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_IDADE_LISTA}"/> 
                  </f:facet>  
                  <h:outputText id="idade" value="#{_listaPacientes.idade}"/>
				  <p:tooltip id="ttIdade" styleClass="tooltip" for="idade" rendered="#{_listaPacientes.indGmr}">
						<b>#{messages.TITLE_INDICADOR_GMR}</b>
					</p:tooltip>
                </p:column>  

                <p:column sortBy="#{_listaPacientes.prontuarioLista}" style="text-align: center; width:13%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_PRONTUARIO}"/> 
                  </f:facet>  
                  <p:outputPanel id="panelPai" layout="inline">
                    <h:outputText id="prontuarioLista" value="#{_listaPacientes.prontuarioLista}"/>
                     <!-- 
                 	 <p:outputPanel id="panelPol" layout="inline">
		                  <mec:commandLink style="float:right;" id="LinkProntuarioLista"
                                   rendered="#{not empty _listaPacientes.prontuario  and mf:hasPermission(securityController, '/paciente/prontuarioonline/arvorePOL.xhtml,render')}"
	                                   onclick="addPOLProntuario(#{_listaPacientes.prontuario})"
		                                   styleClass="silk-icon silk-pol16 silk-icon prontuario_#{_listaPacientes.prontuarioLista}"
                                   ajax="true"/>
                          <p:commandLink onclick="addPOLProntuario(#{_listaPacientes.prontuario})" 
		                  	 immediate="true" 
		                  	 title="Clique para abrir Ã¡rvore do POL" 
		                  	 styleClass="silk-add silk-icon" ajax="true"/>
                  	</p:outputPanel>
                  	-->
                  	 <mec:commandLink title="#{messages.TITLE_ABRIR_PRONTUARIO_ONLINE}" 
                  	   		style="float:right;padding: 0px 4px;" 
                  	   		rendered="#{not empty _listaPacientes.prontuario and mf:hasPermission(securityController, '/paciente/prontuarioonline/arvorePOL.xhtml,render')}" 
                  	   		onclick="parent.addPOLProntuario(#{_listaPacientes.prontuario})" 
                  	   		styleClass="silk-icon silk-pol16 silk-icon" ajax="true"
                  	   	/>
                  	
                  	</p:outputPanel>
                    <!-- <p:tooltip id="ttPol" styleClass="tooltip" for="panelPol">
						<h:outputText value="#{messages.TITLE_ABRIR_PRONTUARIO_ONLINE}"/>
					</p:tooltip>  -->
					<p:tooltip id="ttProntuarioLista" styleClass="tooltip" for="prontuarioLista" rendered="#{_listaPacientes.indGmr}">
                   		<b>#{messages.TITLE_INDICADOR_GMR}</b>
					</p:tooltip> 
                </p:column>  
                <p:column sortBy="#{_listaPacientes.nomeResponsavel}" style="width:23%;  #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_RESPONSAVEL}"/> 
                  </f:facet>  
                  <h:outputText id="nomeResponsavel" value="#{_listaPacientes.nomeResponsavel}"/>
				  <p:tooltip id="ttNomeResponsavel" styleClass="tooltip" for="nomeResponsavel" rendered="#{_listaPacientes.indGmr}">
						<b>#{messages.TITLE_INDICADOR_GMR}</b>
					</p:tooltip>
                </p:column>  
                <p:column sortBy="#{_listaPacientes.dataInicioAtendimento}" style="width:12%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_DATA_ATENDIMENTO_LISTA}"/> 
                  </f:facet>  
                  <h:outputText id="dataInicioAtendimento" value="#{_listaPacientes.dataInicioAtendimento}">
                        <f:convertDateTime pattern="dd/MM/yy HH:mm"/>
                  </h:outputText>
				  <p:tooltip id="ttDataInicioAtendimento" styleClass="tooltip" for="dataInicioAtendimento" rendered="#{_listaPacientes.indGmr}">
						<b>#{messages.TITLE_INDICADOR_GMR}</b>
					</p:tooltip>
                </p:column>  
                <p:column sortBy="#{_listaPacientes.permanencia}" style="text-align: center; width:5%;  #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_PERMANENCIA}"/> 
                  </f:facet>
                  	<h:outputText id="permanencia" value="#{_listaPacientes.permanencia}"/>
					<p:tooltip id="ttPermanencia" styleClass="tooltip" for="permanencia" rendered="#{_listaPacientes.indGmr}">
						<b>#{messages.TITLE_INDICADOR_GMR}</b>
					</p:tooltip>
                </p:column>  
                <p:column  sortBy="#{_listaPacientes.ordemIconePrescricao}" style="text-align: center; width:2%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <p:outputPanel id="panelIconePrescricao" layout="block">
                  <mec:commandLink
                  	action="#{listaPacientesInternadosController.realizarChamadaPrescricao}"
                  	rendered="#{not empty _listaPacientes.statusPrescricao}"
                  	styleClass=" #{listaPacientesInternadosController.getBundle().getString('ICONE_'.concat(_listaPacientes.statusPrescricao.name()))} silk-icon"
                  	disabled="#{mf:hasPermission(securityController, 'internacao,somenteLeitura')}" > 
                    <f:setPropertyActionListener target="#{listaPacientesInternadosController.atdSeq}" value="#{_listaPacientes.atdSeq}" for="command"/>  
                    <f:setPropertyActionListener target="#{verificarPrescricaoMedicaController.atendimentoSeq}" value="#{_listaPacientes.atdSeq}" for="command"/>  
                    <f:setPropertyActionListener target="#{verificarPrescricaoMedicaController.voltarPara}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/> 
                  </mec:commandLink>
				</p:outputPanel>
				  <p:tooltip id="ttPanelIconePrescricao" styleClass="tooltip" for="panelIconePrescricao" rendered="#{not empty _listaPacientes.statusPrescricao or _listaPacientes.indGmr}">	
						<h:outputText value="#{not empty _listaPacientes.statusPrescricao ? listaPacientesInternadosController.montarMensagemIconePrescricao(_listaPacientes) : ''}"/>
						<br clear="none"/><b>#{_listaPacientes.indGmr ? messages.TITLE_INDICADOR_GMR:''}</b>
					</p:tooltip>
                </p:column>  
                <p:column sortBy="#{_listaPacientes.ordemIconeSumario}" style="text-align: center; width:2%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : _listaPacientes.indGmr ? 'background-color:#00FFFF;' : ''}">
				  <p:outputPanel id="panelIconeSumario" layout="block">
                   <mec:commandLink
                  	action="#{listaPacientesInternadosController.realizarChamadaSumarioPeloIcone}"
                  	rendered="#{_listaPacientes.statusSumarioAlta != null}"
                  	styleClass=" #{listaPacientesInternadosController.getBundle().getString('ICONE_'.concat(_listaPacientes.statusSumarioAlta.name()))} silk-icon"
                  	ajax="true">  
                    <f:setPropertyActionListener target="#{listaPacientesInternadosController.atdSeq}" value="#{_listaPacientes.atdSeq}" for="command"/> 
                   </mec:commandLink>
                   <p:tooltip id="ttPanelIconeSumario" styleClass="tooltip" for="panelIconeSumario" rendered="#{_listaPacientes.statusSumarioAlta != null or _listaPacientes.indGmr}">	
						<h:outputText value="#{_listaPacientes.statusSumarioAlta != null ? listaPacientesInternadosController.montarMensagemIconeSumario(_listaPacientes) : ''}"/>
						<br clear="none"/><b>#{_listaPacientes.indGmr ? messages.TITLE_INDICADOR_GMR:''}</b>
				   </p:tooltip>
				 </p:outputPanel>
				</p:column>
					
                <p:column sortBy="#{_listaPacientes.ordemIconeSumario}" style="text-align: center; width:2%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <p:outputPanel id="panelSumario" layout="block">
	                  <mec:commandLink action="#{listaPacientesInternadosController.visualizarResultadoExames(_listaPacientes)}"
					                   rendered="#{_listaPacientes.statusExamesNaoVistos != null}"
					                   styleClass=" #{listaPacientesInternadosController.getBundle().getString('ICONE_'.concat(_listaPacientes.statusExamesNaoVistos.name()))} silk-icon"
					                   id="sumario">  
	                  </mec:commandLink>  
	              </p:outputPanel>
                  <p:tooltip id="ttSumario" styleClass="tooltip" for="panelSumario" rendered="#{_listaPacientes.statusExamesNaoVistos != null}">
                  	  <h:outputText value="#{listaPacientesInternadosController.montarMensagemSumario(_listaPacientes)}"/>
				  </p:tooltip> 
                </p:column> 
                 
                <p:column sortBy="#{_listaPacientes.ordemIconePendenciaDocumento}"
                          style="text-align: center; width:2%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <p:outputPanel id="panelIconePendenciaDocumento" layout="block">
					  <mec:commandLink 
							action="#{listaPacientesInternadosController.redirecionarJustificativaLaudos}" 
                                   rendered="#{_listaPacientes.statusPendenciaDocumento != null}"
                                   styleClass="#{listaPacientesInternadosController.getBundle().getString('ICONE_'.concat(_listaPacientes.statusPendenciaDocumento.name()))} silk-icon"
                                   ajax="true"
                                   immediate="true"
                                   id="justificativaLaudos">
	                    <f:setPropertyActionListener target="#{manterJustificativaLaudosController.atendimentoSeq}" value="#{_listaPacientes.atdSeq}" for="command"/>  
	                    <f:setPropertyActionListener target="#{manterJustificativaLaudosController.voltarPara}"
	                                                 value="prescricaomedica-pesquisarListaPacientesInternados"
	                                                 for="command"/>
	                  </mec:commandLink>  
	              </p:outputPanel>
                  <p:tooltip id="ttJustificativaLaudos" styleClass="tooltip" for="panelIconePendenciaDocumento" rendered="#{_listaPacientes.statusPendenciaDocumento != null}">
                  		<h:outputText value="#{listaPacientesInternadosController.montarMensagemIconePendenciaDocumento(_listaPacientes)}" />
				  </p:tooltip>
                </p:column>  
					 
                <p:column sortBy="#{_listaPacientes.ordemIconePacientePesquisa}"
                          style="text-align: center; width:2%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <p:outputPanel id="panelPacientePesquisa" layout="block">
                  <mec:commandLink action="#{listaPacientesInternadosController.realizarChamaPacientePesquisa}"
                                   rendered="#{_listaPacientes.statusPacientePesquisa != null}"
                                   styleClass="icon-paciente-projeto-pesquisa silk-icon"
                                   ajax="true"
	                                   id="pacientePesquisa"
	                                   immediate="true">                    
                  </mec:commandLink>  
                  </p:outputPanel>
                  <p:tooltip id="ttPacientePesquisa" styleClass="tooltip" for="panelPacientePesquisa" rendered="#{_listaPacientes.statusPacientePesquisa != null}">
                  		<h:outputText value="#{listaPacientesInternadosController.montarMensagemPacientePesquisa(_listaPacientes)}" />
				  </p:tooltip>
				  </p:column>
                <p:column sortBy="#{_listaPacientes.ordemIconeEvolucao}"
                          style="text-align: center; width:2%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : ''}">
                  <p:outputPanel id="panelEvolucao" layout="block">
                  <mec:commandLink action="#{listaPacientesInternadosController.realizarChamaEvolucao}"
                                   rendered="#{_listaPacientes.statusEvolucao != null}"
                                   styleClass="icon-paciente-evolucao-conectado silk-icon"
                                   ajax="true"
                                   immediate="true"
	                                   id="evolucao">                    
                     
                  </mec:commandLink>  
                  </p:outputPanel>
                  <p:tooltip id="ttEvolucao" styleClass="tooltip" for="panelEvolucao" rendered="#{_listaPacientes.statusEvolucao != null}">
                  	<h:outputText value="#{listaPacientesInternadosController.montarMensagemEvolucao(_listaPacientes)}" />
                  </p:tooltip>  
                </p:column>      
                  
                <p:column sortBy="#{_listaPacientes.ordemIconeCertificacaoDigital}" style="text-align: center; width:2%; #{_listaPacientes.possuiPlanoAltas ? 'background-color: #D2FFD8' : _listaPacientes.indGmr ? 'background-color:#00FFFF;' : ''}">
                <p:outputPanel id="panelIconePendencia" layout="block"> 
                  <mec:commandLink id="btRedirecionaPendenciasAssinatura"
                  	action="#{listaPacientesInternadosController.redirecionarListarPendenciasAssinatura}"
                  	rendered="#{_listaPacientes.statusCertificacaoDigital != null}"
                  	disabled="#{not mf:hasPermission(securityController, 'assinaturaDigital,alterarContextoProfissional')}"
                  	styleClass="silk-certificacao-digital silk-icon"> 
                    <f:setPropertyActionListener target="#{listaPacientesInternadosController.pacienteListaProfissionalVO}" value="#{_listaPacientes}" for="command"/> 
                  </mec:commandLink>
				</p:outputPanel>
					<p:tooltip id="ttPanelIconePendencia" styleClass="tooltip" for="panelIconePendencia">	
						<h:outputText value="#{messages.MENSAGEM_PENDENCIA_ASSINATURA_DIGITAL}"/>
						<br clear="none"/>
						<b>#{_listaPacientes.indGmr ? messages.TITLE_INDICADOR_GMR:''}</b>
					</p:tooltip>
                </p:column>                 
                <p:column sortBy="#{_listaPacientes.ordemIconeAnamneseEvolucao}" style="text-align:center;" width="2%">
                	<p:outputPanel id="panelAnamenseEvolucao" layout="block">
                		<mec:commandLink 
                			action="#{listaPacientesInternadosController.redirecionarListarAnamneseEvolucoes}"
                			rendered="#{_listaPacientes.statusAnamneseEvolucao != null}"
                			styleClass="#{listaPacientesInternadosController.getBundle().getString('ICONE_'.concat(_listaPacientes.statusAnamneseEvolucao.name()))} silk-icon">
                			 <f:setPropertyActionListener target="#{listarAnamneseEvolucaoController.atdSeq}" value="#{listaPacientesInternadosController.atdSeq}" for="command"/>  
       			 			 <f:setPropertyActionListener target="#{listarAnamneseEvolucaoController.paginaChamadora}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/>
                		</mec:commandLink>
                	</p:outputPanel>
                	<p:tooltip id="ttStatusAnamneseEvolucao" styleClass="tooltip" for="panelAnamenseEvolucao" rendered="#{_listaPacientes.statusAnamneseEvolucao != null}">
                		<h:outputText value="#{listaPacientesInternadosController.getBundle().getString('LABEL_'.concat(_listaPacientes.statusAnamneseEvolucao.name()))}" />
                	</p:tooltip>
                </p:column>
                 
              </mec:serverDataTable> 
         </aghu:column>
         <aghu:column type="button"> 
          <p:outputPanel id="tabelaAcao" >
              <mec:commandButton id="bt_prescrever_enf_hospital_clinicas_aghweb"
                                 value="#{messages.LABEL_PRESCREVER}"
                                 disabled="empty listaPacientesInternadosController.pacienteListaProfissionalVO"
                                 onclick="open_modal_aghweb('#{listaPacientesInternadosController.urlBaseWebForms}', '#{listaPacientesInternadosController.atdSeq}', '#{listaPacientesInternadosController.obterTokenUsuarioLogado()}', '#{listaPacientesInternadosController.banco}', 'mpmf_elab_prescricao.fmx'); return false;"
                                 rendered="#{listaPacientesInternadosController.isPrescreverAghweb()}"
                                 styleClass="bt_cinza" />
              <mec:commandButton
                        id="bt_prescrever"
                        value="#{messages.LABEL_PRESCREVER}"
                        rendered="#{listaPacientesInternadosController.isPrescreverAghweb() == false}"
                        action="#{listaPacientesInternadosController.realizarChamadaPrescricao}"
                        disabled="#{empty listaPacientesInternadosController.pacienteListaProfissionalVO or listaPacientesInternadosController.disableButtonPrescrever or (mf:hasPermission(securityController, 'paciente,somenteLeitura'))}"
                        styleClass="bt_cinza">
                <f:setPropertyActionListener target="#{verificarPrescricaoMedicaController.atendimentoSeq}" value="#{listaPacientesInternadosController.atdSeq}" for="command"/>  
                <f:setPropertyActionListener target="#{verificarPrescricaoMedicaController.voltarPara}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/> 
              </mec:commandButton> 
           
              <mec:commandButton id="bt_solicitarExames" value="#{messages.LABEL_SOLICITAR_EXAMES}" 
              action="#{listaPacientesInternadosController.realizarChamadaSolicitarExame}" 
              disabled="#{listaPacientesInternadosController.disableButtonSolicitarExame or 
              empty listaPacientesInternadosController.pacienteListaProfissionalVO and 
              (mf:hasPermission(securityController, 'paciente,somenteLeitura')) or
              listaPacientesInternadosController.aghuBotoesExameHemoterapia}" 
              rendered="#{listaPacientesInternadosController.verificarModuloExameAtivo()}" styleClass="bt_cinza">
                <f:setPropertyActionListener target="#{solicitacaoExameController.atendimentoSeq}" value="#{listaPacientesInternadosController.atdSeq}" for="command"/>  
                <f:setPropertyActionListener target="#{solicitacaoExameController.atendimento}" value="#{listaPacientesInternadosController.atendimento}" for="command"/>
                <f:setPropertyActionListener target="#{solicitacaoExameController.paginaChamadora}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/> 
              </mec:commandButton> 
              
               <mec:commandButton id="bt_anamnese_evolucao" value="#{messages.LABEL_ANAMNESE_EVOLUCAO}"
              	action="#{listaPacientesInternadosController.redirecionarListarAnamneseEvolucoes}"
              	disabled="#{!listaPacientesInternadosController.enableButtonAnamneseEvolucao or (mf:hasPermission(securityController, 'paciente,somenteLeitura'))}"
              	rendered="#{mf:hasPermission(securityController, 'visualizarAnamneseEvolucao,visualizar') and !(mf:hasPermission(securityController, 'altaPacientes_Enfermeiro_Obstetra,pesquisar'))}">
                 <f:setPropertyActionListener target="#{listarAnamneseEvolucaoController.atdSeq}" value="#{listaPacientesInternadosController.atdSeq}" for="command"/>  
       			 <f:setPropertyActionListener target="#{listarAnamneseEvolucaoController.paginaChamadora}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/>
              </mec:commandButton>
              
              <mec:commandButton id="bt_solicitar_exames_hcpa_aghweb"
							value="#{messages.LABEL_SOLICITAR_EXAMES_AGHWEB}"
							rendered="#{listaPacientesInternadosController.habilitarContgExamesAGHWeb()}"
							disabled="#{listaPacientesInternadosController.disableButtonSolicitarExame or empty listaPacientesInternadosController.pacienteListaProfissionalVO}"
														onclick="solicitacao('#{listaPacientesInternadosController.urlBaseWebForms}', '#{listaPacientesInternadosController.banco}','#{listaPacientesInternadosController.atdSeq}', '#{listaPacientesInternadosController.obterTokenUsuarioLogado()}'); return false;"
							styleClass="bt_cinza" />
            
              <mec:commandButton id="bt_evolucao"
                                 value="#{messages.LABEL_EVOLUCAO}"
                                 disabled="#{!listaPacientesInternadosController.isToInvokeAghWebOnBtnEvolucao() or empty listaPacientesInternadosController.pacienteListaProfissionalVO}"
                                 onclick="open_modal_aghweb('#{listaPacientesInternadosController.urlBaseWebForms}', '#{listaPacientesInternadosController.atdSeq}', '#{listaPacientesInternadosController.obterTokenUsuarioLogado()}', '#{listaPacientesInternadosController.banco}', 'mamf_atu_internacao.fmx'); return false;"
                                 styleClass="bt_cinza"
                                 rendered="false"/>

 				<mec:commandButton id="bt_pesquisar_exames"
							value="#{messages.LABEL_PESQUISAR_EXAMES}"
							disabled="#{empty listaPacientesInternadosController.pacienteListaProfissionalVO or 
							listaPacientesInternadosController.disableButtonSolicitarExame or
							listaPacientesInternadosController.aghuBotoesExameHemoterapia}"
							action="#{listaPacientesInternadosController.visualizarResultadoExames(listaPacientesInternadosController.pacienteListaProfissionalVO)}"							
							styleClass="bt_cinza" />
            
              <mec:commandButton id="bt_alta"
                                 value="#{listaPacientesInternadosController.getBundle().getString('LABEL_'.concat(listaPacientesInternadosController.labelAlta.name()))}"
                                 action="#{listaPacientesInternadosController.realizarChamadaSumarioAlta}"
                                 disabled="#{empty listaPacientesInternadosController.pacienteListaProfissionalVO or listaPacientesInternadosController.disableButtonAltaObito or not mf:hasPermission(securityController, 'acessarAltaOuObito,acessar')}"
                                 styleClass="bt_cinza"
                                 ajax="true"
                                 process="@this"
                                 rendered="#{listaPacientesInternadosController.aghuUsoSumario eq 'N'}"
                                 render="panelRedirecionaAghweb">
                <f:setPropertyActionListener target="#{manterSumarioAltaController.altanAtdSeq}" value="#{listaPacientesInternadosController.atdSeq}" for="command"/>  
                <f:setPropertyActionListener target="#{manterSumarioAltaController.altanListaOrigem}" value="ALTA" for="command"/>
                
                
                <f:setPropertyActionListener target="#{manterSumarioAltaController.prontuario}" value="#{listaPacientesInternadosController.prontuario}" for="command"/>
				<f:setPropertyActionListener target="#{manterSumarioAltaController.responsavel}" value="#{listaPacientesInternadosController.responsavel}" for="command"/>
				<f:setPropertyActionListener target="#{manterSumarioAltaController.leito}" value="#{listaPacientesInternadosController.leito}" for="command"/>
			 	<f:setPropertyActionListener target="#{manterSumarioAltaController.nome}" value="#{listaPacientesInternadosController.nome}" for="command"/>
			 	<f:setPropertyActionListener target="#{manterSumarioAltaController.idade}" value="#{listaPacientesInternadosController.idade}" for="command"/>
                
                  
                <f:setPropertyActionListener target="#{manterSumarioAltaController.voltarPara}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/> 
              </mec:commandButton> 
              
              <mec:commandButton id="bt_alta_agh_web"
 								 action="#{listaPacientesInternadosController.preparaRedirecionarAghWebSumarioAlta}"
                                 value="#{listaPacientesInternadosController.getBundle().getString('LABEL_'.concat(listaPacientesInternadosController.labelAlta.name()))}"
                                 disabled="#{empty listaPacientesInternadosController.pacienteListaProfissionalVO or listaPacientesInternadosController.disableButtonAltaObito or not mf:hasPermission(securityController, 'acessarAltaOuObito,acessar')}"
                                 styleClass="bt_cinza"
                                 ajax="true"
                                 process="@this"
                                 rendered="#{listaPacientesInternadosController.aghuUsoSumario eq 'V'}"
                                 render="panelRedirecionaAghweb">
              </mec:commandButton> 
              
             <mec:commandButton id="bt_receita" value="#{messages.LABEL_BTN_RECEITA_LISTA_PACIENTES}"
                     action="#{listaPacientesInternadosController.realizarChamadaTelaReceita}"
                     disabled="#{not mf:hasPermission(securityController, 'acessarReceituarioInternacao,executar') 
                     		or listaPacientesInternadosController.isToInvokeAghWebOnBtnReceita() 
                     		or empty listaPacientesInternadosController.pacienteListaProfissionalVO}"
                     		rendered="false"
                     styleClass="bt_cinza"  >
              <f:setPropertyActionListener target="#{manterReceitaController.atdSeq}" value="#{listaPacientesInternadosController.atdSeq}" for="command"/>
				 <f:setPropertyActionListener target="#{manterReceitaController.prontuario}" value="#{listaPacientesInternadosController.prontuario}" for="command"/>
				 <f:setPropertyActionListener target="#{manterReceitaController.responsavel}" value="#{listaPacientesInternadosController.responsavel}" for="command"/>
				 <f:setPropertyActionListener target="#{manterReceitaController.leito}" value="#{listaPacientesInternadosController.leito}" for="command"/>
			 	<f:setPropertyActionListener target="#{manterReceitaController.nome}" value="#{listaPacientesInternadosController.nome}" for="command"/>
			 	<f:setPropertyActionListener target="#{manterReceitaController.idade}" value="#{listaPacientesInternadosController.idade}" for="command"/>
			 	<f:setPropertyActionListener target="#{manterReceitaController.voltarPara}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/>
			  </mec:commandButton>

             <mec:commandButton id="bt_obito"
                                action="#{listaPacientesInternadosController.realizarChamadaSumarioObito}"
                                value="#{listaPacientesInternadosController.getBundle().getString('LABEL_'.concat(listaPacientesInternadosController.labelObito.name()))}"
                                disabled="#{listaPacientesInternadosController.disableButtonAltaObito or empty listaPacientesInternadosController.pacienteListaProfissionalVO or not mf:hasPermission(securityController, 'acessarAltaOuObito,acessar')}"
                                styleClass="bt_cinza" rendered="#{!(mf:hasPermission(securityController, 'altaPacientes_Enfermeiro_Obstetra,pesquisar'))}"
                                ajax="true"
                                process="@this"
                                render="panelRedirecionaAghweb">
                                
	                <f:setPropertyActionListener target="#{manterSumarioAltaController.altanAtdSeq}" value="#{listaPacientesInternadosController.atdSeq}" for="command"/>  
	                <f:setPropertyActionListener target="#{manterSumarioAltaController.altanListaOrigem}" value="OBITO" for="command"/>  
	                <f:setPropertyActionListener target="#{manterSumarioAltaController.voltarPara}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/> 
              </mec:commandButton>

            
            <mec:commandButton id="bt_obito_agh_web"
             					rendered="#{listaPacientesInternadosController.aghuUsoSumario eq 'V' and !listaPacientesInternadosController.fichaApachePendente}"
								action="#{listaPacientesInternadosController.preparaRedirecionarAghWebSumarioObito}"
                                value="#{listaPacientesInternadosController.getBundle().getString('LABEL_'.concat(listaPacientesInternadosController.labelObito.name()))}"
                                disabled="#{listaPacientesInternadosController.isToInvokeBtnObito() or empty listaPacientesInternadosController.pacienteListaProfissionalVO or not mf:hasPermission(securityController, 'acessarAltaOuObito,acessar')}"
                                styleClass="bt_cinza"
                                ajax="true"
                                process="@this"
                                render="panelRedirecionaAghweb">
              </mec:commandButton>
            
            
             <mec:commandButton id="bt_obito_ficha_pendente"
             					rendered="#{listaPacientesInternadosController.aghuUsoSumario eq 'V' and listaPacientesInternadosController.fichaApachePendente}"
             					action="#{listaPacientesInternadosController.preparaRedirecionarAghWebFichaApache}"
                                value="#{listaPacientesInternadosController.getBundle().getString('LABEL_'.concat(listaPacientesInternadosController.labelObito.name()))}"
                                disabled="#{listaPacientesInternadosController.isToInvokeBtnObito() or empty listaPacientesInternadosController.pacienteListaProfissionalVO or not mf:hasPermission(securityController, 'acessarAltaOuObito,acessar')}"
                                styleClass="bt_cinza"
                                ajax="true"
                                process="@this"
                                render="panelRedirecionaAghweb">
              </mec:commandButton>  
            
              <mec:commandButton id="bt_anteciparSumario" 
              					value="#{messages.LABEL_ANTECIPAR_SUMARIO}" 
              					action="#{listaPacientesInternadosController.realizarChamadaAnteciparSumario}" 
              					disabled="#{listaPacientesInternadosController.disableButtonAltaObito or empty listaPacientesInternadosController.pacienteListaProfissionalVO 
              					or (mf:hasPermission(securityController, 'paciente, somenteLeitura'))}" 
              					rendered="#{listaPacientesInternadosController.aghuUsoSumario eq 'N'}"
              					styleClass="bt_cinza"> 
                <f:setPropertyActionListener target="#{manterSumarioAltaController.altanAtdSeq}" value="#{listaPacientesInternadosController.atdSeq}" for="command"/>  
                <f:setPropertyActionListener target="#{manterSumarioAltaController.altanApaSeq}" value="#{listaPacientesInternadosController.apaSeq}" for="command"/>  
                <f:setPropertyActionListener target="#{manterSumarioAltaController.altanListaOrigem}" value="ANTECIPAR SUMARIO" for="command"/>  
                <f:setPropertyActionListener target="#{manterSumarioAltaController.voltarPara}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/>
                <f:setPropertyActionListener target="#{manterSumarioAltaController.prontuario}" value="#{listaPacientesInternadosController.prontuario}" for="command"/>
				<f:setPropertyActionListener target="#{manterSumarioAltaController.responsavel}" value="#{listaPacientesInternadosController.responsavel}" for="command"/>
				<f:setPropertyActionListener target="#{manterSumarioAltaController.leito}" value="#{listaPacientesInternadosController.leito}" for="command"/>
				<f:setPropertyActionListener target="#{manterSumarioAltaController.nome}" value="#{listaPacientesInternadosController.nome}" for="command"/>
				<f:setPropertyActionListener target="#{manterSumarioAltaController.idade}" value="#{listaPacientesInternadosController.idade}" for="command"/> 
              </mec:commandButton> 
              
               <mec:commandButton id="bt_anteciparSumario_agh_web"
             					action="#{listaPacientesInternadosController.preparaRedirecionarAghWebAnteciparSumario}"
              					value="#{messages.LABEL_ANTECIPAR_SUMARIO}"
              					disabled="#{listaPacientesInternadosController.disableButtonAltaObito or empty listaPacientesInternadosController.pacienteListaProfissionalVO}"
                                styleClass="bt_cinza"
                                ajax="true"
                                process="@this"
                                rendered="#{listaPacientesInternadosController.aghuUsoSumario eq 'V'}"
                                render="panelRedirecionaAghweb">
              </mec:commandButton> 
            
              <mec:commandButton id="bt_atender_consultoria"
                                 value="#{messages.LABEL_BTN_ATENDER_CONSULTORIA_LISTA_PACIENTES}"
                                 action="#{listaPacientesInternadosController.realizarChamadaTelaAtenderConsultoria}"
                                 disabled="#{empty listaPacientesInternadosController.pacienteListaProfissionalVO or (mf:hasPermission(securityController, 'paciente, somenteLeitura'))}"
                                 styleClass="bt_cinza" rendered="#{!(mf:hasPermission(securityController, 'altaPacientes_Enfermeiro_Obstetra,pesquisar'))}" >
              	<f:setPropertyActionListener for="command" target="#{pesquisarConsultoriasInternacaoController.voltarListaPacientes}" value="true"/>
              </mec:commandButton> 
           
              <mec:commandButton id="bt_controleInfeccao"
                                 value="#{messages.LABEL_CONTROLE_INFECCAO}"
                                 disabled="#{listaPacientesInternadosController.isToInvokeAghWebOnBtnControleInfeccao() or empty listaPacientesInternadosController.pacienteListaProfissionalVO}"
                                 onclick="open_modal_aghweb('#{listaPacientesInternadosController.urlBaseWebForms}', '#{listaPacientesInternadosController.atdSeq}', '#{listaPacientesInternadosController.obterTokenUsuarioLogado()}', '#{listaPacientesInternadosController.banco}', 'mcif_atu_med_prvt_a.fmx'); return false;"
                                 styleClass="bt_cinza" rendered="#{!(mf:hasPermission(securityController, 'altaPacientes_Enfermeiro_Obstetra,pesquisar'))}" />
            
              <mec:commandButton id="bt_diagnosticos" value="#{messages.LABEL_DIAGNOSTICOS}"
                                 action="#{listaPacientesInternadosController.realizarChamadaDiagnosticos}"
                                 disabled="#{empty listaPacientesInternadosController.pacienteListaProfissionalVO or (mf:hasPermission(securityController, 'paciente, somenteLeitura'))}"
                                 styleClass="bt_cinza">
                <f:setPropertyActionListener target="#{diagnosticosPacienteController.atendimentoSeq}" value="#{listaPacientesInternadosController.atdSeq}" for="command"/> 
              </mec:commandButton> 
           
                <mec:commandButton id="bt_controles" value="#{messages.LABEL_CONTROLES}" action="#{listaPacientesInternadosController.visualizarRegistrosControle}" rendered="#{!(mf:hasPermission(securityController, 'altaPacientes_Enfermeiro_Obstetra,pesquisar'))}" disabled="#{not mf:hasPermission(securityController, 'pesquisarRegistrosControlePaciente,pesquisar') or empty listaPacientesInternadosController.pacienteListaProfissionalVO or (mf:hasPermission(securityController, 'paciente, somenteLeitura'))}" styleClass="bt_cinza">  
                <f:setPropertyActionListener target="#{registrosPacienteController.codigoPaciente}" value="#{listaPacientesInternadosController.pacCodigo}" for="command"/>  
                <f:setPropertyActionListener target="#{registrosPacienteController.voltarPara}" value="prescricaomedica-pesquisarListaPacientesInternados" for="command"/> 
              </mec:commandButton> 
           
              <mec:commandButton id="bt_quimioterapia"
              	value="#{messages.LABEL_BT_QUIMIOTERAPIA}"
              	disabled="#{not mf:hasPermission(securityController, 'prescreverQuimioterapia,executar') or listaPacientesInternadosController.isToInvokeAghWebOnBtnQuimioterapiaDialise() or empty listaPacientesInternadosController.pacienteListaProfissionalVO}"
              	action="#{listaPacientesInternadosController.exibirMsgAcessoQuimioAGHWEB}"
              	styleClass="bt_cinza"/>
              	
              <mec:commandButton id="bt_dialise"
              	value="#{messages.LABEL_BT_DIALISE}"
              	disabled="#{not mf:hasPermission(securityController, 'prescreverDialise,executar') or listaPacientesInternadosController.isToInvokeAghWebOnBtnQuimioterapiaDialise() or empty listaPacientesInternadosController.pacienteListaProfissionalVO}"
              	action="#{listaPacientesInternadosController.obterCaminhoDialise()}"
              	styleClass="bt_cinza"/>
           </p:outputPanel>
           </aghu:column>
        </aghu:panelGeral>  
        <aghu:acao> 
		  <mec:commandButton id="atualizarLista" value="#{messages.LABEL_ATUALIZAR_LISTA}" action="#{listaPacientesInternadosController.atualizarLista}" styleClass="bt_cinza" onclick="PF('loadDialogWG').show()"/> 
          <mec:commandButton id="configurarLista" value="#{messages.LABEL_CONFIGURAR_LISTA}" action="#{listaPacientesInternadosController.configurarLista}" styleClass=" icon-config bt_cinza"> 
            <f:setPropertyActionListener target="#{configurarListaPacientesController.cameFrom}" value="listaPacientesPrescricaoMedica" for="command"/> 
          </mec:commandButton>  
          <mec:commandButton id="imprimirLista" value="#{messages.LABEL_IMPRIMIR_LISTA}" disabled="false" action="#{listaPacientesInternadosController.imprimirLista}" styleClass=" icon-print bt_cinza" profile="print" onclick="PF('loadDialogWG').show()"/>
        </aghu:acao> 
        
	    <p:outputPanel id="panelRedirecionaAghweb">
	
	      <p:outputPanel id="panelRedirecionaAghwebFichaApache" rendered="#{listaPacientesInternadosController.redirecionarAghWebFichaApache}">
	      	<script type="text/javascript">
				open_modal_aghweb_sumario_obito_ficha_pendente('#{listaPacientesInternadosController.urlBaseWebForms}', '#{listaPacientesInternadosController.obterTokenUsuarioLogado()}', '#{listaPacientesInternadosController.atdSeq}', '#{listaPacientesInternadosController.apaSeq}', 'ALTA', '', '#{listaPacientesInternadosController.pacCodigo}', '#{listaPacientesInternadosController.atdSeq}', '#{listaPacientesInternadosController.banco}', 'mpmf_atu_ficha_apach.fmx');
			</script>
	      </p:outputPanel>

	      <p:outputPanel id="panelRedirecionaAghwebSumarioAlta" rendered="#{listaPacientesInternadosController.redirecionarAghWebSumarioAlta}">
	      	<script type="text/javascript">
				open_modal_aghweb_sumario_alta_obito('#{listaPacientesInternadosController.urlBaseWebForms}', '#{listaPacientesInternadosController.obterTokenUsuarioLogado()}', '#{listaPacientesInternadosController.atdSeq}', '#{listaPacientesInternadosController.apaSeq}', 'ALTA', '', '#{listaPacientesInternadosController.pacCodigo}', '#{listaPacientesInternadosController.banco}', 'mpmf_sumario_alta.fmx');
			</script>
	      </p:outputPanel>

	      <p:outputPanel id="panelRedirecionaAghwebAnteciparSumario" rendered="#{listaPacientesInternadosController.redirecionarAghWebAnteciparSumario}">
	      	<script type="text/javascript">
		      	open_modal_aghweb_sumario_alta_obito('#{listaPacientesInternadosController.urlBaseWebForms}', '#{listaPacientesInternadosController.obterTokenUsuarioLogado()}', '#{listaPacientesInternadosController.atdSeq}', '#{listaPacientesInternadosController.apaSeq}', 'ANTECIPAR SUMARIO', '', '#{listaPacientesInternadosController.pacCodigo}', '#{listaPacientesInternadosController.banco}', 'mpmf_sumario_alta.fmx');
			</script>
	      </p:outputPanel>

	      <p:outputPanel id="panelRedirecionaAghwebSumarioObito" rendered="#{listaPacientesInternadosController.redirecionarAghWebSumarioObito}">
	      	<script type="text/javascript">
				open_modal_aghweb_sumario_alta_obito('#{listaPacientesInternadosController.urlBaseWebForms}', '#{listaPacientesInternadosController.obterTokenUsuarioLogado()}', '#{listaPacientesInternadosController.atdSeq}', '#{listaPacientesInternadosController.apaSeq}', 'ALTA', '', '#{listaPacientesInternadosController.pacCodigo}', '#{listaPacientesInternadosController.banco}', 'mpmf_sumario_obito.fmx');
			</script>
	      </p:outputPanel>
	
	    </p:outputPanel>

      </h:form> 
      
    </ui:define>    
    <ui:define name="script">function evolucao(url, atdSeq, token) { varaptitude otherParams = 'aghw_token=' + token + '+p_atd_seq=' + atdSeq; if (atdSeq != null) { abrirJanelaModal(url,{ parameters: { config: 'aghweb', form: 'mamf_atu_internacao.fmx', otherparams: otherParams }, onClose: function() { } }); } }</ui:define> 
    <ui:define name="script">function pol(url, prontuario, banco,token) { var otherParams = 'aghw_token=' + token + '+p_origem_pol_aghu=S+p_prontuario=' + prontuario + '+p_banco=' + banco ; if (prontuario != null) { abrirJanelaModal(url,{ parameters: { config: 'aghweb', form: 'aipf_pront_on_line.fmx', otherparams: otherParams }, onClose: function() { } }); } }</ui:define>
    
     <ui:define name="jsReady"> 
     
     if (#{! empty listaPacientesInternadosController.pacienteListaProfissionalVO}){     	 
     	setFocus('.prontuario_#{listaPacientesInternadosController.pacienteListaProfissionalVO.prontuario}')  
     }
     
     </ui:define>  
  </ui:composition>
</html>